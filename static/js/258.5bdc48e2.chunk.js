"use strict";(self.webpackChunkportfolio_site=self.webpackChunkportfolio_site||[]).push([[258],{258:(e,t,r)=>{r.r(t),r.d(t,{default:()=>f});var s=r(555),o=r(43),n=r(579);const a={COLS:14,ROWS:20,DROP_INTERVAL:800},c={COLS:10,ROWS:20,DROP_INTERVAL:500},l=30,i={I:{shape:[[0,0,0,0],[1,1,1,1],[0,0,0,0],[0,0,0,0]],color:"#06b6d4"},J:{shape:[[1,0,0],[1,1,1],[0,0,0]],color:"#3b82f6"},L:{shape:[[0,0,1],[1,1,1],[0,0,0]],color:"#f97316"},O:{shape:[[1,1],[1,1]],color:"#facc15"},S:{shape:[[0,1,1],[1,1,0],[0,0,0]],color:"#22c55e"},T:{shape:[[0,1,0],[1,1,1],[0,0,0]],color:"#a855f7"},Z:{shape:[[1,1,0],[0,1,1],[0,0,0]],color:"#ef4444"}},d=()=>{const e=Object.keys(i),t=e[Math.floor(Math.random()*e.length)];return(0,s.A)((0,s.A)({},i[t]),{},{x:3,y:0})},u=(e,t,r,s,o,n)=>{for(let a=0;a<e.length;a++)for(let c=0;c<e[a].length;c++)if(e[a][c]){const e=a+s,l=c+r;if(e>=o||l<0||l>=n||t[e]&&t[e][l])return!1}return!0},f=e=>{let{isDark:t}=e;const[r,i]=(0,o.useState)(c),f=r.COLS,h=r.ROWS,m=f*l,x=h*l,p=(0,o.useRef)(null),[b,y]=(0,o.useState)(Array.from({length:h},(()=>Array(f).fill(0)))),g=(0,o.useRef)(b),[w,k]=(0,o.useState)(d()),A=(0,o.useRef)(w),[j,S]=(0,o.useState)(!1),[N,R]=(0,o.useState)(!1),[C,v]=(0,o.useState)(!1),[E,L]=(0,o.useState)(0),[O,D]=(0,o.useState)(0),T=(0,o.useRef)(0),W=(0,o.useRef)(0),_=(0,o.useRef)();(0,o.useEffect)((()=>{A.current=w}),[w]),(0,o.useEffect)((()=>{g.current=b}),[b]);const F=e=>{e.clearRect(0,0,m,x);for(let n=0;n<h;n++)for(let t=0;t<f;t++)g.current[n][t]&&(e.fillStyle=g.current[n][t],e.fillRect(t*l,n*l,l,l),e.strokeStyle="#1e3a8a",e.strokeRect(t*l,n*l,l,l));const{shape:t,x:r,y:s,color:o}=A.current;t.forEach(((t,n)=>{t.forEach(((t,a)=>{t&&(e.fillStyle=o,e.fillRect((r+a)*l,(s+n)*l,l,l),e.strokeStyle="#1e3a8a",e.strokeRect((r+a)*l,(s+n)*l,l,l))}))}))},I=e=>{if(!p.current)return;const t=p.current.getContext("2d"),o=e-W.current;W.current=e,T.current+=o;const n=r.DROP_INTERVAL;if(j&&!N&&T.current>n){T.current=0;const e=(0,s.A)((0,s.A)({},A.current),{},{y:A.current.y+1});if(u(e.shape,g.current,e.x,e.y,h,f))k(e);else{const e=((e,t,r)=>{const s=e.map((e=>[...e])),{shape:o,x:n,y:a}=t;return o.forEach(((e,o)=>{e.forEach(((e,c)=>{e&&a+o<r&&n+c>=0&&(s[a+o][n+c]=t.color)}))})),s})(g.current,A.current,h),{grid:t,linesCleared:r}=((e,t,r)=>{const s=e.filter((e=>e.some((e=>0===e)))),o=t-s.length;for(;s.length<t;)s.unshift(Array(r).fill(0));return{grid:s,linesCleared:o}})(e,h,f);if(r>0){const e=[0,100,300,500,800][r]||0;L((t=>t+e))}y(t);const s=d();if(!u(s.shape,g.current,s.x,s.y,h,f))return S(!1),void v(!0);k(s),A.current=s}}F(t),_.current=requestAnimationFrame(I)};(0,o.useEffect)((()=>{j&&M()}),[r]),(0,o.useEffect)((()=>(j&&!N&&(W.current=performance.now(),_.current=requestAnimationFrame(I)),()=>cancelAnimationFrame(_.current))),[j,N]),(0,o.useEffect)((()=>{if(j&&!N){const e=p.current.getContext("2d");F(e)}}),[b,w]),(0,o.useEffect)((()=>{const e=e=>{if(!j||N)return;let t=(0,s.A)({},A.current);if("ArrowLeft"===e.key||"a"===e.key.toLowerCase())t.x--;else if("ArrowRight"===e.key||"d"===e.key.toLowerCase())t.x++;else if("ArrowDown"===e.key||"s"===e.key.toLowerCase())t.y++;else if("ArrowUp"===e.key||"w"===e.key.toLowerCase()){const e=(r=A.current.shape)[0].map(((e,t)=>r.map((e=>e[t])).reverse()));if(u(e,g.current,A.current.x,A.current.y,h,f))return void k((0,s.A)((0,s.A)({},A.current),{},{shape:e}))}var r;u(t.shape,g.current,t.x,t.y,h,f)&&k(t)};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)}),[j,N,b]);const M=()=>{y(Array.from({length:h},(()=>Array(f).fill(0)))),L(0),D((e=>Math.max(e,E))),v(!1);const e=d();k(e),A.current=e,S(!0),R(!1),setTimeout((()=>{if(p.current){const e=p.current.getContext("2d");F(e)}}),0)};return(0,n.jsxs)("div",{className:"flex flex-col items-center w-full px-4 pb-10 gap-y-4",children:[(0,n.jsxs)("div",{className:"flex gap-4 flex-wrap justify-center",children:[(0,n.jsx)("button",{onClick:()=>{S(!1),R(!1),v(!1),y(Array.from({length:h},(()=>Array(f).fill(0)))),L(0),cancelAnimationFrame(_.current)},disabled:!j,className:"px-2 py-1 rounded-md border text-white bg-gray-700",children:"Exit"}),(0,n.jsx)("button",{onClick:()=>i(a),disabled:j,className:"px-2 py-1 rounded-md border text-white bg-green-500",children:"Easy"}),(0,n.jsx)("button",{onClick:()=>i(c),disabled:j,className:"px-2 py-1 rounded-md border text-white bg-red-500",children:"Hard"}),(0,n.jsx)("button",{onClick:M,className:"px-2 py-1 rounded-md border text-white ".concat(j?"bg-slate-600":"bg-green-600"),children:"Start"}),(0,n.jsx)("button",{onClick:()=>{j&&R((e=>!e))},disabled:!j,className:"px-2 py-1 rounded-md border text-white ".concat(N?"bg-yellow-600":t?"bg-blue-600":"bg-slate-600"),children:N?"Resume":"Pause"})]}),(0,n.jsx)("canvas",{ref:p,width:m,height:x,className:"border border-slate-700 bg-black",style:{imageRendering:"pixelated"}}),(0,n.jsxs)("div",{className:"".concat(t?"text-white":"text-black"," font-semibold text-lg"),children:["Score: ",E]}),(0,n.jsxs)("div",{className:"".concat(t?"text-white":"text-black"," font-medium"),children:["High Score: ",O]}),C&&(0,n.jsx)("div",{className:"mt-4 p-4 text-center text-red-500 font-bold bg-white bg-opacity-10 rounded",children:"Game Over"}),(0,n.jsxs)("div",{className:"".concat(t?"bg-slate-800 text-slate-200":"bg-slate-100 text-slate-800"," max-w-md mt-4 p-4 rounded-md text-sm shadow transition-colors"),children:[(0,n.jsx)("p",{className:"".concat(t?"text-emerald-400":"text-emerald-600"," font-semibold"),children:"About Tetris"}),(0,n.jsx)("p",{children:"Tetris is a puzzle game where blocks (tetrominoes) fall from the top. Your goal is to move and rotate them to create full rows, which clear and score points!"}),(0,n.jsxs)("p",{children:[(0,n.jsx)("span",{className:"".concat(t?"text-white":"text-black"," font-semibold"),children:"Controls:"})," ","Use ",(0,n.jsx)("span",{className:"font-mono",children:"W"}),"/",(0,n.jsx)("span",{className:"font-mono",children:"A"}),"/",(0,n.jsx)("span",{className:"font-mono",children:"S"}),"/",(0,n.jsx)("span",{className:"font-mono",children:"D"})," or arrow keys to move. Down or S to drop faster. W or up to rotate. A and D or left/right arrows to move left/right."]}),(0,n.jsxs)("p",{children:[(0,n.jsx)("span",{className:"".concat(t?"text-white":"text-black"," font-semibold"),children:"Goal:"})," ","Clear as many lines as possible!"]}),(0,n.jsxs)("p",{children:[(0,n.jsx)("span",{className:"".concat(t?"text-white":"text-black"," font-semibold"),children:"Modes:"})," ","Easy gives you more time and space. Hard is faster and narrower. Choose your challenge!"]})]})]})}}}]);
//# sourceMappingURL=258.5bdc48e2.chunk.js.map