{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\shawj\\\\Desktop\\\\ALL\\\\portfolio\\\\src\\\\components\\\\TetrisGame.js\",\n  _s = $RefreshSig$();\nimport React, { useRef, useEffect, useState } from \"react\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst DEFAULT_MODE = {\n  COLS: 10,\n  ROWS: 20,\n  DROP_INTERVAL: 500\n};\nconst EASY_MODE = {\n  COLS: 14,\n  ROWS: 20,\n  DROP_INTERVAL: 800\n};\nconst HARD_MODE = DEFAULT_MODE;\nconst BLOCK_SIZE = 30;\n// canvasWidth and canvasHeight will be defined inside the component\n\nconst TETROMINOES = {\n  I: {\n    shape: [[0, 0, 0, 0], [1, 1, 1, 1], [0, 0, 0, 0], [0, 0, 0, 0]],\n    color: \"#06b6d4\"\n  },\n  J: {\n    shape: [[1, 0, 0], [1, 1, 1], [0, 0, 0]],\n    color: \"#3b82f6\"\n  },\n  L: {\n    shape: [[0, 0, 1], [1, 1, 1], [0, 0, 0]],\n    color: \"#f97316\"\n  },\n  O: {\n    shape: [[1, 1], [1, 1]],\n    color: \"#facc15\"\n  },\n  S: {\n    shape: [[0, 1, 1], [1, 1, 0], [0, 0, 0]],\n    color: \"#22c55e\"\n  },\n  T: {\n    shape: [[0, 1, 0], [1, 1, 1], [0, 0, 0]],\n    color: \"#a855f7\"\n  },\n  Z: {\n    shape: [[1, 1, 0], [0, 1, 1], [0, 0, 0]],\n    color: \"#ef4444\"\n  }\n};\nconst randomTetromino = () => {\n  const keys = Object.keys(TETROMINOES);\n  const rand = keys[Math.floor(Math.random() * keys.length)];\n  return {\n    ...TETROMINOES[rand],\n    x: 3,\n    y: 0\n  };\n};\nconst rotateMatrix = matrix => matrix[0].map((_, i) => matrix.map(row => row[i]).reverse());\nconst isValidMove = (shape, grid, offsetX, offsetY, ROWS, COLS) => {\n  for (let y = 0; y < shape.length; y++) {\n    for (let x = 0; x < shape[y].length; x++) {\n      if (shape[y][x]) {\n        const newY = y + offsetY;\n        const newX = x + offsetX;\n        if (newY >= ROWS || newX < 0 || newX >= COLS || grid[newY] && grid[newY][newX]) {\n          return false;\n        }\n      }\n    }\n  }\n  return true;\n};\nconst mergeTetromino = (grid, tetromino, ROWS) => {\n  const newGrid = grid.map(row => [...row]);\n  const {\n    shape,\n    x,\n    y\n  } = tetromino;\n  shape.forEach((row, dy) => {\n    row.forEach((val, dx) => {\n      if (val && y + dy < ROWS && x + dx >= 0) {\n        newGrid[y + dy][x + dx] = tetromino.color;\n      }\n    });\n  });\n  return newGrid;\n};\nconst clearLines = (grid, ROWS, COLS) => {\n  const newGrid = grid.filter(row => row.some(cell => cell === 0));\n  const linesCleared = ROWS - newGrid.length;\n  while (newGrid.length < ROWS) newGrid.unshift(Array(COLS).fill(0));\n  return {\n    grid: newGrid,\n    linesCleared\n  };\n};\nconst TetrisGame = ({\n  isDark\n}) => {\n  _s();\n  const [mode, setMode] = useState(HARD_MODE);\n  const COLS = mode.COLS;\n  const ROWS = mode.ROWS;\n  const canvasWidth = COLS * BLOCK_SIZE;\n  const canvasHeight = ROWS * BLOCK_SIZE;\n  const canvasRef = useRef(null);\n  const [grid, setGrid] = useState(Array.from({\n    length: ROWS\n  }, () => Array(COLS).fill(0)));\n  const gridRef = useRef(grid);\n  const [activeBlock, setActiveBlock] = useState(randomTetromino());\n  const activeBlockRef = useRef(activeBlock);\n  const [isRunning, setIsRunning] = useState(false);\n  const [isPaused, setIsPaused] = useState(false);\n  const [isGameOver, setIsGameOver] = useState(false);\n  const [score, setScore] = useState(0);\n  const [highScore, setHighScore] = useState(0);\n  const dropCounterRef = useRef(0);\n  const lastTimeRef = useRef(0);\n  const requestRef = useRef();\n  useEffect(() => {\n    activeBlockRef.current = activeBlock;\n  }, [activeBlock]);\n  useEffect(() => {\n    gridRef.current = grid;\n  }, [grid]);\n  const draw = ctx => {\n    ctx.clearRect(0, 0, canvasWidth, canvasHeight);\n    for (let y = 0; y < ROWS; y++) {\n      for (let x = 0; x < COLS; x++) {\n        if (gridRef.current[y][x]) {\n          ctx.fillStyle = gridRef.current[y][x];\n          ctx.fillRect(x * BLOCK_SIZE, y * BLOCK_SIZE, BLOCK_SIZE, BLOCK_SIZE);\n          ctx.strokeStyle = \"#1e3a8a\";\n          ctx.strokeRect(x * BLOCK_SIZE, y * BLOCK_SIZE, BLOCK_SIZE, BLOCK_SIZE);\n        }\n      }\n    }\n    const {\n      shape,\n      x,\n      y,\n      color\n    } = activeBlockRef.current;\n    shape.forEach((row, dy) => {\n      row.forEach((val, dx) => {\n        if (val) {\n          ctx.fillStyle = color;\n          ctx.fillRect((x + dx) * BLOCK_SIZE, (y + dy) * BLOCK_SIZE, BLOCK_SIZE, BLOCK_SIZE);\n          ctx.strokeStyle = \"#1e3a8a\";\n          ctx.strokeRect((x + dx) * BLOCK_SIZE, (y + dy) * BLOCK_SIZE, BLOCK_SIZE, BLOCK_SIZE);\n        }\n      });\n    });\n  };\n  const gameLoop = time => {\n    if (!canvasRef.current) return;\n    const canvas = canvasRef.current;\n    const ctx = canvas.getContext(\"2d\");\n    const deltaTime = time - lastTimeRef.current;\n    lastTimeRef.current = time;\n    dropCounterRef.current += deltaTime;\n    const dropInterval = mode.DROP_INTERVAL;\n    if (isRunning && !isPaused && dropCounterRef.current > dropInterval) {\n      dropCounterRef.current = 0;\n      const moved = {\n        ...activeBlockRef.current,\n        y: activeBlockRef.current.y + 1\n      };\n      if (isValidMove(moved.shape, gridRef.current, moved.x, moved.y, ROWS, COLS)) {\n        setActiveBlock(moved);\n      } else {\n        const merged = mergeTetromino(gridRef.current, activeBlockRef.current, ROWS);\n        const {\n          grid: cleared,\n          linesCleared\n        } = clearLines(merged, ROWS, COLS);\n        if (linesCleared > 0) {\n          const points = [0, 100, 300, 500, 800][linesCleared] || 0;\n          setScore(prev => prev + points);\n        }\n        setGrid(cleared);\n        const nextBlock = randomTetromino();\n        // Check for game over: if the next block collides immediately\n        if (!isValidMove(nextBlock.shape, gridRef.current, nextBlock.x, nextBlock.y, ROWS, COLS)) {\n          setIsRunning(false);\n          setIsGameOver(true);\n          return;\n        }\n        setActiveBlock(nextBlock);\n        activeBlockRef.current = nextBlock;\n      }\n    }\n    draw(ctx);\n    requestRef.current = requestAnimationFrame(gameLoop);\n  };\n  useEffect(() => {\n    if (isRunning) {\n      handleStart();\n    }\n  }, [mode]);\n  useEffect(() => {\n    if (isRunning && !isPaused) {\n      lastTimeRef.current = performance.now();\n      requestRef.current = requestAnimationFrame(gameLoop);\n    }\n    return () => cancelAnimationFrame(requestRef.current);\n  }, [isRunning, isPaused]);\n  useEffect(() => {\n    if (isRunning && !isPaused) {\n      const ctx = canvasRef.current.getContext(\"2d\");\n      draw(ctx);\n    }\n  }, [grid, activeBlock]);\n  useEffect(() => {\n    const handleKey = e => {\n      if (!isRunning || isPaused) return;\n      let moved = {\n        ...activeBlockRef.current\n      };\n      if (e.key === \"ArrowLeft\" || e.key.toLowerCase() === \"a\") moved.x--;else if (e.key === \"ArrowRight\" || e.key.toLowerCase() === \"d\") moved.x++;else if (e.key === \"ArrowDown\" || e.key.toLowerCase() === \"s\") moved.y++;else if (e.key === \"ArrowUp\" || e.key.toLowerCase() === \"w\") {\n        const rotated = rotateMatrix(activeBlockRef.current.shape);\n        if (isValidMove(rotated, gridRef.current, activeBlockRef.current.x, activeBlockRef.current.y, ROWS, COLS)) {\n          setActiveBlock({\n            ...activeBlockRef.current,\n            shape: rotated\n          });\n          return;\n        }\n      }\n      if (isValidMove(moved.shape, gridRef.current, moved.x, moved.y, ROWS, COLS)) setActiveBlock(moved);\n    };\n    window.addEventListener(\"keydown\", handleKey);\n    return () => window.removeEventListener(\"keydown\", handleKey);\n  }, [isRunning, isPaused, grid]);\n  const handleStart = () => {\n    setGrid(Array.from({\n      length: ROWS\n    }, () => Array(COLS).fill(0)));\n    setScore(0);\n    setHighScore(prev => Math.max(prev, score));\n    setIsGameOver(false);\n    const newBlock = randomTetromino();\n    setActiveBlock(newBlock);\n    activeBlockRef.current = newBlock;\n    setIsRunning(true);\n    setIsPaused(false);\n\n    // Delay drawing slightly until canvas is mounted\n    setTimeout(() => {\n      if (canvasRef.current) {\n        const ctx = canvasRef.current.getContext(\"2d\");\n        draw(ctx);\n      }\n    }, 0);\n  };\n  const handlePause = () => {\n    if (isRunning) setIsPaused(prev => !prev);\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"flex flex-col items-center w-full px-4 pb-10 gap-y-4\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex gap-4 flex-wrap justify-center\",\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => {\n          setIsRunning(false);\n          setIsPaused(false);\n          setIsGameOver(false);\n          setGrid(Array.from({\n            length: ROWS\n          }, () => Array(COLS).fill(0)));\n          setScore(0);\n          cancelAnimationFrame(requestRef.current);\n        },\n        disabled: !isRunning,\n        className: \"px-2 py-1 rounded-md border text-white bg-gray-700\",\n        children: \"Exit\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 232,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => setMode(EASY_MODE),\n        disabled: isRunning,\n        className: \"px-2 py-1 rounded-md border text-white bg-green-500\",\n        children: \"Easy\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 246,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => setMode(HARD_MODE),\n        disabled: isRunning,\n        className: \"px-2 py-1 rounded-md border text-white bg-red-500\",\n        children: \"Hard\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 253,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: handleStart,\n        className: `px-2 py-1 rounded-md border text-white ${isRunning ? \"bg-slate-600\" : \"bg-green-600\"}`,\n        children: \"Start\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 260,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: handlePause,\n        disabled: !isRunning,\n        className: `px-2 py-1 rounded-md border text-white ${isPaused ? \"bg-yellow-600\" : isDark ? \"bg-blue-600\" : \"bg-slate-600\"}`,\n        children: isPaused ? \"Resume\" : \"Pause\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 266,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 231,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"canvas\", {\n      ref: canvasRef,\n      width: canvasWidth,\n      height: canvasHeight,\n      className: \"border border-slate-700 bg-black\",\n      style: {\n        imageRendering: \"pixelated\"\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 275,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"text-white font-semibold text-lg\",\n      children: [\"Score: \", score]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 283,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"text-white font-medium\",\n      children: [\"High Score: \", highScore]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 284,\n      columnNumber: 7\n    }, this), isGameOver && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"mt-4 p-4 text-center text-red-500 font-bold bg-white bg-opacity-10 rounded\",\n      children: \"Game Over\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 287,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: `${isDark ? \"bg-slate-800 text-slate-200\" : \"bg-slate-100 text-slate-800\"} max-w-md mt-4 p-4 rounded-md text-sm shadow transition-colors`,\n      children: [/*#__PURE__*/_jsxDEV(\"p\", {\n        className: `${isDark ? \"text-emerald-400\" : \"text-emerald-600\"} font-semibold`,\n        children: \"About Tetris\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 296,\n        columnNumber: 3\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"Tetris is a puzzle game where blocks (tetrominoes) fall from the top. Your goal is to move and rotate them to create full rows, which clear and score points!\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 299,\n        columnNumber: 3\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          className: `${isDark ? \"text-white\" : \"text-black\"} font-semibold`,\n          children: \"Controls:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 303,\n          columnNumber: 5\n        }, this), \" \", \"Use \", /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"font-mono\",\n          children: \"W\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 304,\n          columnNumber: 9\n        }, this), \"/\", /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"font-mono\",\n          children: \"A\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 304,\n          columnNumber: 46\n        }, this), \"/\", /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"font-mono\",\n          children: \"S\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 304,\n          columnNumber: 83\n        }, this), \"/\", /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"font-mono\",\n          children: \"D\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 304,\n          columnNumber: 120\n        }, this), \" or arrow keys to move. Down or S to drop faster. W or up to rotate.\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 302,\n        columnNumber: 3\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          className: `${isDark ? \"text-white\" : \"text-black\"} font-semibold`,\n          children: \"Goal:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 307,\n          columnNumber: 5\n        }, this), \" \", \"Clear as many lines as possible!\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 306,\n        columnNumber: 3\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          className: `${isDark ? \"text-white\" : \"text-black\"} font-semibold`,\n          children: \"Modes:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 311,\n          columnNumber: 5\n        }, this), \" \", \"Easy gives you more time and space. Hard is faster and narrower. Choose your challenge!\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 310,\n        columnNumber: 3\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 293,\n      columnNumber: 1\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 230,\n    columnNumber: 5\n  }, this);\n};\n_s(TetrisGame, \"DiM6SB02e+D9HdvlSzAs8fCTEIc=\");\n_c = TetrisGame;\nexport default TetrisGame;\nvar _c;\n$RefreshReg$(_c, \"TetrisGame\");","map":{"version":3,"names":["React","useRef","useEffect","useState","jsxDEV","_jsxDEV","DEFAULT_MODE","COLS","ROWS","DROP_INTERVAL","EASY_MODE","HARD_MODE","BLOCK_SIZE","TETROMINOES","I","shape","color","J","L","O","S","T","Z","randomTetromino","keys","Object","rand","Math","floor","random","length","x","y","rotateMatrix","matrix","map","_","i","row","reverse","isValidMove","grid","offsetX","offsetY","newY","newX","mergeTetromino","tetromino","newGrid","forEach","dy","val","dx","clearLines","filter","some","cell","linesCleared","unshift","Array","fill","TetrisGame","isDark","_s","mode","setMode","canvasWidth","canvasHeight","canvasRef","setGrid","from","gridRef","activeBlock","setActiveBlock","activeBlockRef","isRunning","setIsRunning","isPaused","setIsPaused","isGameOver","setIsGameOver","score","setScore","highScore","setHighScore","dropCounterRef","lastTimeRef","requestRef","current","draw","ctx","clearRect","fillStyle","fillRect","strokeStyle","strokeRect","gameLoop","time","canvas","getContext","deltaTime","dropInterval","moved","merged","cleared","points","prev","nextBlock","requestAnimationFrame","handleStart","performance","now","cancelAnimationFrame","handleKey","e","key","toLowerCase","rotated","window","addEventListener","removeEventListener","max","newBlock","setTimeout","handlePause","className","children","onClick","disabled","fileName","_jsxFileName","lineNumber","columnNumber","ref","width","height","style","imageRendering","_c","$RefreshReg$"],"sources":["C:/Users/shawj/Desktop/ALL/portfolio/src/components/TetrisGame.js"],"sourcesContent":["import React, { useRef, useEffect, useState } from \"react\";\r\n\r\nconst DEFAULT_MODE = { COLS: 10, ROWS: 20, DROP_INTERVAL: 500 };\r\nconst EASY_MODE = { COLS: 14, ROWS: 20, DROP_INTERVAL: 800 };\r\nconst HARD_MODE = DEFAULT_MODE;\r\nconst BLOCK_SIZE = 30;\r\n// canvasWidth and canvasHeight will be defined inside the component\r\n\r\nconst TETROMINOES = {\r\n  I: { shape: [[0,0,0,0],[1,1,1,1],[0,0,0,0],[0,0,0,0]], color: \"#06b6d4\" },\r\n  J: { shape: [[1,0,0],[1,1,1],[0,0,0]], color: \"#3b82f6\" },\r\n  L: { shape: [[0,0,1],[1,1,1],[0,0,0]], color: \"#f97316\" },\r\n  O: { shape: [[1,1],[1,1]], color: \"#facc15\" },\r\n  S: { shape: [[0,1,1],[1,1,0],[0,0,0]], color: \"#22c55e\" },\r\n  T: { shape: [[0,1,0],[1,1,1],[0,0,0]], color: \"#a855f7\" },\r\n  Z: { shape: [[1,1,0],[0,1,1],[0,0,0]], color: \"#ef4444\" },\r\n};\r\n\r\nconst randomTetromino = () => {\r\n  const keys = Object.keys(TETROMINOES);\r\n  const rand = keys[Math.floor(Math.random() * keys.length)];\r\n  return { ...TETROMINOES[rand], x: 3, y: 0 };\r\n};\r\n\r\nconst rotateMatrix = (matrix) => matrix[0].map((_, i) => matrix.map(row => row[i]).reverse());\r\n\r\nconst isValidMove = (shape, grid, offsetX, offsetY, ROWS, COLS) => {\r\n  for (let y = 0; y < shape.length; y++) {\r\n    for (let x = 0; x < shape[y].length; x++) {\r\n      if (shape[y][x]) {\r\n        const newY = y + offsetY;\r\n        const newX = x + offsetX;\r\n        if (\r\n          newY >= ROWS ||\r\n          newX < 0 ||\r\n          newX >= COLS ||\r\n          (grid[newY] && grid[newY][newX])\r\n        ) {\r\n          return false;\r\n        }\r\n      }\r\n    }\r\n  }\r\n  return true;\r\n};\r\n\r\nconst mergeTetromino = (grid, tetromino, ROWS) => {\r\n  const newGrid = grid.map(row => [...row]);\r\n  const { shape, x, y } = tetromino;\r\n  shape.forEach((row, dy) => {\r\n    row.forEach((val, dx) => {\r\n      if (val && y + dy < ROWS && x + dx >= 0) {\r\n        newGrid[y + dy][x + dx] = tetromino.color;\r\n      }\r\n    });\r\n  });\r\n  return newGrid;\r\n};\r\n\r\nconst clearLines = (grid, ROWS, COLS) => {\r\n  const newGrid = grid.filter(row => row.some(cell => cell === 0));\r\n  const linesCleared = ROWS - newGrid.length;\r\n  while (newGrid.length < ROWS) newGrid.unshift(Array(COLS).fill(0));\r\n  return { grid: newGrid, linesCleared };\r\n};\r\n\r\nconst TetrisGame = ({ isDark }) => {\r\n  const [mode, setMode] = useState(HARD_MODE);\r\n  const COLS = mode.COLS;\r\n  const ROWS = mode.ROWS;\r\n  const canvasWidth = COLS * BLOCK_SIZE;\r\n  const canvasHeight = ROWS * BLOCK_SIZE;\r\n  const canvasRef = useRef(null);\r\n  const [grid, setGrid] = useState(Array.from({ length: ROWS }, () => Array(COLS).fill(0)));\r\n  const gridRef = useRef(grid);\r\n  const [activeBlock, setActiveBlock] = useState(randomTetromino());\r\n  const activeBlockRef = useRef(activeBlock);\r\n  const [isRunning, setIsRunning] = useState(false);\r\n  const [isPaused, setIsPaused] = useState(false);\r\n  const [isGameOver, setIsGameOver] = useState(false);\r\n  const [score, setScore] = useState(0);\r\n  const [highScore, setHighScore] = useState(0);\r\n\r\n  const dropCounterRef = useRef(0);\r\n  const lastTimeRef = useRef(0);\r\n  const requestRef = useRef();\r\n\r\n  useEffect(() => {\r\n    activeBlockRef.current = activeBlock;\r\n  }, [activeBlock]);\r\n\r\n  useEffect(() => {\r\n    gridRef.current = grid;\r\n  }, [grid]);\r\n\r\n  const draw = (ctx) => {\r\n    ctx.clearRect(0, 0, canvasWidth, canvasHeight);\r\n    for (let y = 0; y < ROWS; y++) {\r\n      for (let x = 0; x < COLS; x++) {\r\n        if (gridRef.current[y][x]) {\r\n        ctx.fillStyle = gridRef.current[y][x];\r\n        ctx.fillRect(x * BLOCK_SIZE, y * BLOCK_SIZE, BLOCK_SIZE, BLOCK_SIZE);\r\n          ctx.strokeStyle = \"#1e3a8a\";\r\n          ctx.strokeRect(x * BLOCK_SIZE, y * BLOCK_SIZE, BLOCK_SIZE, BLOCK_SIZE);\r\n        }\r\n      }\r\n    }\r\n    const { shape, x, y, color } = activeBlockRef.current;\r\n    shape.forEach((row, dy) => {\r\n      row.forEach((val, dx) => {\r\n        if (val) {\r\n          ctx.fillStyle = color;\r\n          ctx.fillRect((x + dx) * BLOCK_SIZE, (y + dy) * BLOCK_SIZE, BLOCK_SIZE, BLOCK_SIZE);\r\n          ctx.strokeStyle = \"#1e3a8a\";\r\n          ctx.strokeRect((x + dx) * BLOCK_SIZE, (y + dy) * BLOCK_SIZE, BLOCK_SIZE, BLOCK_SIZE);\r\n        }\r\n      });\r\n    });\r\n  };\r\n\r\n  const gameLoop = (time) => {\r\n    if (!canvasRef.current) return;\r\n    const canvas = canvasRef.current;\r\n    const ctx = canvas.getContext(\"2d\");\r\n\r\n    const deltaTime = time - lastTimeRef.current;\r\n    lastTimeRef.current = time;\r\n    dropCounterRef.current += deltaTime;\r\n\r\n    const dropInterval = mode.DROP_INTERVAL;\r\n\r\n    if (isRunning && !isPaused && dropCounterRef.current > dropInterval) {\r\n      dropCounterRef.current = 0;\r\n      const moved = { ...activeBlockRef.current, y: activeBlockRef.current.y + 1 };\r\n      if (isValidMove(moved.shape, gridRef.current, moved.x, moved.y, ROWS, COLS)) {\r\n        setActiveBlock(moved);\r\n      } else {\r\n        const merged = mergeTetromino(gridRef.current, activeBlockRef.current, ROWS);\r\n        const { grid: cleared, linesCleared } = clearLines(merged, ROWS, COLS);\r\n        if (linesCleared > 0) {\r\n          const points = [0, 100, 300, 500, 800][linesCleared] || 0;\r\n          setScore(prev => prev + points);\r\n        }\r\n        setGrid(cleared);\r\n        const nextBlock = randomTetromino();\r\n        // Check for game over: if the next block collides immediately\r\n        if (!isValidMove(nextBlock.shape, gridRef.current, nextBlock.x, nextBlock.y, ROWS, COLS)) {\r\n          setIsRunning(false);\r\n          setIsGameOver(true);\r\n          return;\r\n        }\r\n        setActiveBlock(nextBlock);\r\n        activeBlockRef.current = nextBlock;\r\n      }\r\n    }\r\n\r\n    draw(ctx);\r\n    requestRef.current = requestAnimationFrame(gameLoop);\r\n  };\r\n\r\n  \r\n\r\n  useEffect(() => {\r\n    if (isRunning) {\r\n      handleStart();\r\n    }\r\n  }, [mode]);\r\n\r\n  useEffect(() => {\r\n    if (isRunning && !isPaused) {\r\n      lastTimeRef.current = performance.now();\r\n      requestRef.current = requestAnimationFrame(gameLoop);\r\n    }\r\n    return () => cancelAnimationFrame(requestRef.current);\r\n  }, [isRunning, isPaused]);\r\n\r\n  useEffect(() => {\r\n    if (isRunning && !isPaused) {\r\n      const ctx = canvasRef.current.getContext(\"2d\");\r\n      draw(ctx);\r\n    }\r\n  }, [grid, activeBlock]);\r\n\r\n  useEffect(() => {\r\n    const handleKey = (e) => {\r\n      if (!isRunning || isPaused) return;\r\n      let moved = { ...activeBlockRef.current };\r\n      if (e.key === \"ArrowLeft\" || e.key.toLowerCase() === \"a\") moved.x--;\r\n      else if (e.key === \"ArrowRight\" || e.key.toLowerCase() === \"d\") moved.x++;\r\n      else if (e.key === \"ArrowDown\" || e.key.toLowerCase() === \"s\") moved.y++;\r\n      else if (e.key === \"ArrowUp\" || e.key.toLowerCase() === \"w\") {\r\n        const rotated = rotateMatrix(activeBlockRef.current.shape);\r\n        if (isValidMove(rotated, gridRef.current, activeBlockRef.current.x, activeBlockRef.current.y, ROWS, COLS)) {\r\n          setActiveBlock({ ...activeBlockRef.current, shape: rotated });\r\n          return;\r\n        }\r\n      }\r\n      if (isValidMove(moved.shape, gridRef.current, moved.x, moved.y, ROWS, COLS)) setActiveBlock(moved);\r\n    };\r\n\r\n    window.addEventListener(\"keydown\", handleKey);\r\n    return () => window.removeEventListener(\"keydown\", handleKey);\r\n  }, [isRunning, isPaused, grid]);\r\n\r\n  const handleStart = () => {\r\n    setGrid(Array.from({ length: ROWS }, () => Array(COLS).fill(0)));\r\n    setScore(0);\r\n    setHighScore(prev => Math.max(prev, score));\r\n    setIsGameOver(false);\r\n    const newBlock = randomTetromino();\r\n    setActiveBlock(newBlock);\r\n    activeBlockRef.current = newBlock;\r\n    setIsRunning(true);\r\n    setIsPaused(false);\r\n\r\n    // Delay drawing slightly until canvas is mounted\r\n    setTimeout(() => {\r\n      if (canvasRef.current) {\r\n        const ctx = canvasRef.current.getContext(\"2d\");\r\n        draw(ctx);\r\n      }\r\n    }, 0);\r\n  };\r\n\r\n  const handlePause = () => {\r\n    if (isRunning) setIsPaused((prev) => !prev);\r\n  };\r\n\r\n  return (\r\n    <div className=\"flex flex-col items-center w-full px-4 pb-10 gap-y-4\">\r\n      <div className=\"flex gap-4 flex-wrap justify-center\">\r\n        <button\r\n          onClick={() => {\r\n            setIsRunning(false);\r\n            setIsPaused(false);\r\n            setIsGameOver(false);\r\n            setGrid(Array.from({ length: ROWS }, () => Array(COLS).fill(0)));\r\n            setScore(0);\r\n            cancelAnimationFrame(requestRef.current);\r\n          }}\r\n          disabled={!isRunning}\r\n          className=\"px-2 py-1 rounded-md border text-white bg-gray-700\"\r\n        >\r\n          Exit\r\n        </button>\r\n        <button\r\n          onClick={() => setMode(EASY_MODE)}\r\n          disabled={isRunning}\r\n          className=\"px-2 py-1 rounded-md border text-white bg-green-500\"\r\n        >\r\n          Easy\r\n        </button>\r\n        <button\r\n          onClick={() => setMode(HARD_MODE)}\r\n          disabled={isRunning}\r\n          className=\"px-2 py-1 rounded-md border text-white bg-red-500\"\r\n        >\r\n          Hard\r\n        </button>\r\n        <button\r\n          onClick={handleStart}\r\n          className={`px-2 py-1 rounded-md border text-white ${isRunning ? \"bg-slate-600\" : \"bg-green-600\"}`}\r\n        >\r\n          Start\r\n        </button>\r\n        <button\r\n          onClick={handlePause}\r\n          disabled={!isRunning}\r\n          className={`px-2 py-1 rounded-md border text-white ${isPaused ? \"bg-yellow-600\" : isDark ? \"bg-blue-600\" : \"bg-slate-600\"}`}\r\n        >\r\n          {isPaused ? \"Resume\" : \"Pause\"}\r\n        </button>\r\n      </div>\r\n\r\n      <canvas\r\n        ref={canvasRef}\r\n        width={canvasWidth}\r\n        height={canvasHeight}\r\n        className=\"border border-slate-700 bg-black\"\r\n        style={{ imageRendering: \"pixelated\" }}\r\n      />\r\n\r\n      <div className=\"text-white font-semibold text-lg\">Score: {score}</div>\r\n      <div className=\"text-white font-medium\">High Score: {highScore}</div>\r\n\r\n      {isGameOver && (\r\n        <div className=\"mt-4 p-4 text-center text-red-500 font-bold bg-white bg-opacity-10 rounded\">\r\n          Game Over\r\n        </div>\r\n      )}\r\n\r\n      {/* Info Box */}\r\n<div\r\n  className={`${isDark ? \"bg-slate-800 text-slate-200\" : \"bg-slate-100 text-slate-800\"} max-w-md mt-4 p-4 rounded-md text-sm shadow transition-colors`}\r\n>\r\n  <p className={`${isDark ? \"text-emerald-400\" : \"text-emerald-600\"} font-semibold`}>\r\n    About Tetris\r\n  </p>\r\n  <p>\r\n    Tetris is a puzzle game where blocks (tetrominoes) fall from the top. Your goal is to move and rotate them to create full rows, which clear and score points!\r\n  </p>\r\n  <p>\r\n    <span className={`${isDark ? \"text-white\" : \"text-black\"} font-semibold`}>Controls:</span>{\" \"}\r\n    Use <span className=\"font-mono\">W</span>/<span className=\"font-mono\">A</span>/<span className=\"font-mono\">S</span>/<span className=\"font-mono\">D</span> or arrow keys to move. Down or S to drop faster. W or up to rotate.\r\n  </p>\r\n  <p>\r\n    <span className={`${isDark ? \"text-white\" : \"text-black\"} font-semibold`}>Goal:</span>{\" \"}\r\n    Clear as many lines as possible!\r\n  </p>\r\n  <p>\r\n    <span className={`${isDark ? \"text-white\" : \"text-black\"} font-semibold`}>Modes:</span>{\" \"}\r\n    Easy gives you more time and space. Hard is faster and narrower. Choose your challenge!\r\n  </p>\r\n</div>\r\n\r\n    </div>\r\n\r\n    \r\n  );\r\n\r\n  \r\n};\r\n\r\nexport default TetrisGame;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}